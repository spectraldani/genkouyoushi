<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test boards</title>
</head>

<body>
    <svg width="800" height="800" xmlns="http://www.w3.org/2000/svg" style="display: block;margin: 0 auto;">
    </svg>
    <script type="module">
        import { SpacingRectangle } from "../geometry.js";
        import { SVGBox, SVGHanziBox, makeLine, makeBoard } from "../svg.js"

        const svg = document.querySelector('svg');
        const SVG_NS = "http://www.w3.org/2000/svg";

        const testWidth = 55;
        const testHeight = 61;
        {
            const g = document.createElementNS(SVG_NS, "g");
            const strokeColor = "#aaaaaa";
            svg.setAttribute("viewBox", `0 0 ${testWidth} ${testHeight}`);
            svg.appendChild(g);
            g.setAttribute("stroke-width", (1 / 20).toFixed(4));
            for (let i = 0; i <= testWidth; i++) {
                g.appendChild(makeLine(
                    i, 0, i, testHeight, 0,
                    strokeColor
                ));
            }
            for (let i = 0; i <= testHeight; i++) {
                g.appendChild(makeLine(
                    0, i, testWidth, i, 0,
                    strokeColor
                ));
            }
        }

        let origin = [1, 1];
        const nDashesStraight = 19;
        const nDashesDiagonal = 25;

        const testBoxFill1 = "color(srgb 1 1 0 / 0.5)"
        const testBoxFill2 = "color(srgb 0 0.66 0.96 / 0.5)"

        const boardHeight = testHeight - 2;
        const boardWidth = testWidth - 2;

        const box = new SVGHanziBox(
            10, 10,
            new SpacingRectangle(5, 5, 5, 5),
            new SpacingRectangle(0),
            1,
            undefined,
            nDashesStraight, nDashesDiagonal,
            "black", "#aaaaaa",
            true, false, false, false
        );
        box.isEnclosed = box.margin.mergedVertical > 0;

        const [board, boardOuterWidth, boardOuterHeight] = makeBoard(
            boardWidth, boardHeight, box, box.render.bind(box)
        )
        const boardX = origin[0]// + (boardWidth - boardOuterWidth) / 2;
        const boardY = origin[1]// + (boardHeight - boardOuterHeight) / 2;
        board.setAttribute("transform", `translate(${boardX}, ${boardY})`);
        svg.appendChild(board);

        svg.appendChild(new SVGBox(
            boardOuterWidth, boardOuterHeight,
            undefined, undefined,
            0, "none", testBoxFill1
        ).render(boardX, boardY));
        svg.appendChild(new SVGBox(
            boardWidth, boardHeight,
            undefined, undefined,
            0, "none", testBoxFill2
        ).render(origin[0], origin[1]));

    </script>
</body>

</html>